package com.pcs.notifications;

import android.app.Notification;
import android.app.NotificationManager;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.support.v4.app.NotificationCompat;
import android.widget.Toast;



public class Downloader extends BroadcastReceiver{

	private Context mContext;
	private Intent mIntent;

	@Override
	public void onReceive(Context context, Intent intent) {

		
		
		mContext = context;
		mIntent = intent;

		final NotificationCompat.Builder notificationBuilder = 
				new NotificationCompat.Builder(mContext);

		final NotificationManager notificationManager = 
				(NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);
		
		notificationBuilder.setContentTitle(mContext.getResources().getString(R.string.download_txt));
		notificationBuilder.setContentText(mContext.getResources().getString(R.string.downloading_txt));
		
		
		new Thread(new Runnable() {
			        @Override
			        public void run() {
			            int count;

			            for (count = 0; count <= 100; count++) {
			            	notificationBuilder.setProgress(100, count, false);

			            	notificationManager.notify(0, notificationBuilder.build());
			                        try {

			                            Thread.sleep(100);
			                        } catch (InterruptedException e) {
			                          e.printStackTrace();
			                        }
			            }

			            notificationBuilder.setContentText("Download complete").setProgress(0,0,false);
			            notificationManager.notify(0, notificationBuilder.build());
			        }
			    }
			
			).start();

	}

}
