package com.pcs.reminder;

import java.util.Calendar;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.DatePickerDialog.OnDateSetListener;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.app.TimePickerDialog.OnTimeSetListener;
import android.os.Bundle;
import android.transition.Visibility;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.TimePicker;

public class InputActivity extends Activity{

	private Button dateBtn;
	private Button timeBtn;
	private EditText taskEdt;
	private TextView hiddenTxt;
	private ProgressBar progressBar;

	@Override
	protected void onCreate(Bundle savedInstanceState) {

		super.onCreate(savedInstanceState);
		setContentView(R.layout.form);

		dateBtn = (Button) findViewById(R.id.date_btn);
		timeBtn = (Button) findViewById(R.id.time_btn);
		taskEdt = (EditText) findViewById(R.id.task_edt);
		hiddenTxt = (TextView) findViewById(R.id.hidden_txt);
		progressBar = (ProgressBar) findViewById(R.id.progress);

		



		dateBtn.setOnClickListener(new OnClickListener() {

			@Override
			public void onClick(View v) {

				Calendar calendar = Calendar.getInstance();
				 int year = calendar.get(Calendar.YEAR);
				 int month = calendar.get(Calendar.MONTH);
				 int date = calendar.get(Calendar.DAY_OF_MONTH);
				
				DatePickerDialog datePicker = new DatePickerDialog(InputActivity.this,
						new OnDateSetListener(){
					
					@Override
					public void onDateSet(DatePicker view, int year,
							int monthOfYear, int dayOfMonth) {

						hiddenTxt.setVisibility(View.VISIBLE);
						hiddenTxt.setText(getResources().getString(R.string.entered_date)+dayOfMonth+"/"+monthOfYear+"/"+year);
						progressBar.setProgress(34);
					}

				}, year, month, date);
				datePicker.show();
			}

		});  

		timeBtn.setOnClickListener(new OnClickListener() {

			@Override
			public void onClick(View v) {
				Calendar calendar = Calendar.getInstance();
				final int hour = calendar.get(Calendar.HOUR_OF_DAY);
				final int minute = calendar.get(Calendar.MINUTE);
				TimePickerDialog timePicker = new TimePickerDialog(InputActivity.this, new OnTimeSetListener() {

					@Override
					public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

						hiddenTxt.setText(getResources().getString(R.string.entered_time)+hourOfDay+" : "+minute);
						if(progressBar.getProgress()==0){
							progressBar.setProgress(34);
						}
						else if(progressBar.getProgress()==34){
							progressBar.setProgress(67);
						}
						else if(progressBar.getProgress()==67){
							progressBar.setProgress(100);
						}
					}
				}, hour, minute, true);
				timePicker.show();
			}
		});

	}


}
